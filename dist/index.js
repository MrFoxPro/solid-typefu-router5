"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("solid-js"),t=require("solid-js/dom");const n=e.createContext();function r(){return e.useContext(n).getRoute}const o=t.template('<button disabled=""></button>',2),i=t.template("<a></a>",2);var c;function s(e){return"string"==typeof e?e:e.join(".")}(c=exports.LinkNav||(exports.LinkNav={}))[c.Back=0]="Back",c[c.Forward=1]="Forward";const a={navActiveClassName:"is-active"};function u(r,c=a){const{router5:u}=r,{navActiveClassName:l=a.navActiveClassName}=c;return r=>{const c=e.useContext(n).getRouteName;function a(){var e,t;const n=null!==(e=null===(t=r.innerProps)||void 0===t?void 0:t.classList)&&void 0!==e?e:{};return void 0===r.type&&r.nav?(n[l]=function(e,t){if("string"==typeof t){let n=t,r=0;for(;r<e.length;r++){const t=e[r];if(t!==n.slice(0,t.length)||"."!==n[t.length])return!1;n=n.slice(0,t.length+1)}return t.length<=r}if(t.length>e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(c(),r.to),n):n}function f(e){var t;switch(e.preventDefault(),r.type){case void 0:u.navigate(s(r.to),null!==(t=r.params)&&void 0!==t?t:{}),"function"==typeof r.onClick&&r.onClick(e);break;case exports.LinkNav.Back:case exports.LinkNav.Back:window.history.back()}e.target.blur()}return r.disabled?(()=>{const e=o.cloneNode(!0);return t.spread(e,()=>r.innerProps,!1,!1),t.effect(n=>t.classList(e,a(),n)),e})():(()=>{const e=i.cloneNode(!0);return e.__click=f,t.spread(e,()=>r.innerProps,!1,!1),t.effect(n=>{const o=a(),i=void 0===r.type?u.buildPath(s(r.to),r.params):void 0;return n._v$=t.classList(e,o,n._v$),i!==n._v$2&&t.setAttribute(e,"href",n._v$2=i),n},{_v$:void 0,_v$2:void 0}),e})()}}t.delegateEvents(["click"]);const l=e.createContext("");function f(t){const n=r(),o=e.useContext(l),i=void 0!==t.path?t.path:t.prefix,c=void 0!==t.path,s=""!==o?`${o}.${i}`:i;return()=>e.Match({when:c?n().name===s:n().name.startsWith(s),children:l.Provider({value:s,children:()=>t.children})})}function d(e){return e.children}function v(t){const n=r();function o(t,r,o,i){const[c,s]=e.createState(i);const a=e.createMemo(()=>{const e=n().name,r=e.split(".");return r.splice(0,t.length),[e,r]},void 0,(e,t)=>e&&e[0]===t[0]);return e.createEffect(()=>{const e={};(function e(t,n,r,o){for(const i in n){const c=n[i];if("function"!=typeof c){if(void 0!==c&&t[0]===i)return e(t.slice(1),c,r,o)}else{const e=c();r[i]=e,o++}}return o})(a()[1],r,e,0)>0&&s(e)}),o(c)}return function t(n,r){if("function"==typeof r)return r((function(e){const{props:t,render:r,defaultProps:i}=e;return o(n,t,r,i)}));const i=[];let{render:c,fallback:s,...a}=r;if(void 0===c&&(c=d),"function"==typeof c){for(const e in a){const r=[...n,e],o=a[e];i.push(f({path:e,prefix:void 0,children:()=>t(r,o)}))}return c({children:e.Switch({fallback:"function"==typeof s?s({children:i}):void 0,children:i})})}}([],t)}exports.MatchRoute=f,exports.ShowRoute=function(t){const n=r(),o=e.useContext(l),i=void 0!==t.path?t.path:t.prefix,c=void 0!==t.path,s=""!==o?`${o}.${i}`:i;return()=>e.Show({when:c?n().name===s:n().name.startsWith(s),fallback:()=>t.fallback,children:l.Provider({value:s,children:()=>t.children})})},exports.createSolidRouter=function(t,r,o){const i=r(t),c={routes:t,router5:i};return Object.freeze(c),{Link:u(c),Router:e=>v(e.children),Provider(t){const r=i.getState(),[s,a]=e.createSignal(r),[u,l]=e.createSignal(r.name,(e,t)=>e===t),f=e.createMemo(()=>u().split("."),r.name.split("."));return e.createEffect(()=>{i.subscribe(e=>{a(e.route),l(e.route.name)}),i.start(),"function"==typeof o&&o(i)}),n.Provider({value:{getRoute:s,getRouteName:f,router:c},children:t.children})},router:c}},exports.passthru=d;
